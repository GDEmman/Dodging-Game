[gd_scene load_steps=6 format=3 uid="uid://bvvvseqhrynju"]

[ext_resource type="Texture2D" uid="uid://iuggk4413o12" path="res://coin.png" id="1_h5dih"]

[sub_resource type="GDScript" id="GDScript_h5dih"]
resource_name = "CoinPickable"
script/source = "extends Area2D

var hover_tween: Tween

func _ready():
	start_hover()

func start_hover():
	# 1. Pop-in effect
	scale = Vector2.ZERO
	create_tween().tween_property(self, \"scale\", Vector2.ONE, 0.4).set_trans(Tween.TRANS_BACK)
	
	# 2. Continuous bobbing effect
	hover_tween = create_tween().set_loops()
	hover_tween.tween_property($Sprite2D, \"position:y\", -8.0, 1.2).set_trans(Tween.TRANS_SINE).set_ease(Tween.EASE_IN_OUT)
	hover_tween.tween_property($Sprite2D, \"position:y\", 0.0, 1.2).set_trans(Tween.TRANS_SINE).set_ease(Tween.EASE_IN_OUT)

func _on_body_entered(body):
	if body.is_in_group(\"player\"):
		if body.has_method(\"add_score\"):
			body.add_score(100)
			queue_free() # This stops the tween and deletes the coin
"

[sub_resource type="Gradient" id="Gradient_h5dih"]
offsets = PackedFloat32Array(0, 0.61744964)
colors = PackedColorArray(1, 1, 1, 1, 0, 0, 0, 0)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_ou7jl"]
gradient = SubResource("Gradient_h5dih")
use_hdr = true
fill = 1
fill_from = Vector2(0.5, 0.5)
fill_to = Vector2(0, 0)

[sub_resource type="CircleShape2D" id="CircleShape2D_h5dih"]
radius = 14.0

[node name="Coin" type="Area2D"]
scale = Vector2(0.2352115, 0.2352115)
collision_layer = 3
collision_mask = 3
script = SubResource("GDScript_h5dih")

[node name="Sprite2D" type="Sprite2D" parent="."]
texture = ExtResource("1_h5dih")

[node name="PointLight2D" type="PointLight2D" parent="Sprite2D"]
scale = Vector2(0.9999998, 0.9999998)
color = Color(1, 1, 0.023529412, 1)
energy = 0.64
texture = SubResource("GradientTexture2D_ou7jl")
height = 75.0

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
shape = SubResource("CircleShape2D_h5dih")

[connection signal="body_entered" from="." to="." method="_on_body_entered"]
